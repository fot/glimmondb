.. glimmondb documentation master file, created by
   sphinx-quickstart on Fri Nov 13 12:37:46 2015.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

Documentation for the glimmondb package
======================================

Contents:

.. toctree::
   :maxdepth: 4

   glimmondb

Setup Instructions
==================

Add this to your .bashrc file or the equivalent to your .cshrc file::

    export SKA_DATA=/proj/sot/ska/data


The use of local directories is supported with the additional definition of two environment
variables. These are ``GLIMMONDATA`` and ``TBDDATA``. Defining these environment variables will 
override the ``SKA_DATA`` variable, so only use them when you need a local version, such as for
testing.

To point to a local version of the glimmon database, or to generate a new local version of this
database, set the ``GLIMMONDATA`` environment variable to point to the directory of choice. This 
can be done from within Python using the following code as an example, with the appropriate
directory substituted::

    import os
    os.environ["GLIMMONDATA"] = "/home/username/AXAFAUTO/glimmon_archive"

If you are generating a new version from scratch, remember to copy over all previous versions of 
the G_LIMMON.dec file from ``/proj/sot/ska/data/glimmon_archive/`` to your local working directory. 
``glimmondb`` will use this directory to look for the ``G_LIMMON.dec`` historical list of files as 
well as to store the generated SQLite 3 file and log file. If you copy these files from elsewhere,
you may run into several bugs in how the ``G_LIMMON.dec`` file was originally written (such as 
missing or mistyped information). There were several files that needed minor editing to ensure they
could be properly imported. There were no edits that changed the intended function of
``G_LIMMON.dec``.

If you wish to also use a local version of the TDB, define the TDBDATA environment variable using
the following code as an example::

    os.environ["TDBDATA"] = "/home/username/AXAFAUTO/tdb_archive"

The TDB archive is generated by exporting the database tables from the .mdb file to csv files and
converting all text to lower case. Certain files pertaining to limit and expected state definitions
are then imported and saved to json and pickle files. Please see the 
``/proj/sot/ska/data/fot_tdb_archive`` directory for an example.


Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`

